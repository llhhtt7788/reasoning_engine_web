# w.2.5.0 验收检查清单

**测试日期**: _____________  
**测试人员**: _____________

---

## ✅ 编译与构建

- [x] `npm run build` 成功（无 TypeScript 错误）
- [x] `npm run dev` 成功启动
- [ ] 浏览器打开 http://localhost:3001 无报错

---

## ✅ 页面初始化

- [ ] 页面加载完成，显示左侧 Session 列表
- [ ] 如果是首次访问，自动创建第一个 Session
- [ ] 顶部显示"Med-Go 推理工作台"标题
- [ ] 中间显示"开始对话"占位文本
- [ ] 右侧调试面板默认隐藏

---

## ✅ Session 管理

### 创建新 Session
- [ ] 点击"+ 新建对话"按钮
- [ ] 生成新的 conversation_id
- [ ] 左侧列表新增一个"New Chat"项
- [ ] 新 Session 置顶并显示蓝色高亮
- [ ] 中间聊天区清空，显示"开始对话"

### Session 列表显示
- [ ] 当前 Session 显示蓝色边框高亮
- [ ] 其余 Session 按最后活动时间降序排列
- [ ] 显示 Session 标题（首条用户消息前 40 字符）
- [ ] 显示时间戳（刚刚、X分钟前、X小时前、X天前）
- [ ] 显示消息数量（"· X 条"）

### Session 切换
- [ ] 点击历史 Session
- [ ] 中间聊天区显示该 Session 的所有消息
- [ ] 顶部 conversation_id 更新为该 Session 的 ID
- [ ] 该 Session 移到列表顶部并高亮

### Session 删除
- [ ] 鼠标悬停在 Session 上，显示删除按钮（X）
- [ ] 点击删除按钮，弹出确认窗口
- [ ] 确认窗口显示 Session 标题和消息数
- [ ] 点击"取消"，窗口关闭，Session 保留
- [ ] 点击"删除"（红色按钮），Session 从列表移除
- [ ] 如果删除的是当前 Session，自动切换到最近的 Session
- [ ] localStorage 中对应的数据被删除

### Session 持久化
- [ ] 发送消息后，Session 自动保存
- [ ] 刷新页面（F5），Session 列表保持不变
- [ ] 刷新页面后，当前对话内容完整保留
- [ ] 关闭浏览器，重新打开，历史 Session 依然存在

---

## ✅ 消息发送与接收

- [ ] 在输入框输入消息，按 Enter 发送
- [ ] 用户消息显示在聊天区（蓝色气泡，右对齐）
- [ ] AI 回复开始流式输出（白色气泡，左对齐）
- [ ] 流式输出过程中，用户消息保持在视口顶部（不被顶出）
- [ ] Session 标题自动更新为首条用户消息的前 40 字符
- [ ] Session 的"最后活动时间"和"消息数量"自动更新

---

## ✅ 智能 Reasoning 面板

### 自动展开（深度推理问题）
- [ ] 发送复杂问题（如"如何治疗 2 型糖尿病并发症？"）
- [ ] AI 返回 Reasoning 内容
- [ ] 右侧调试面板自动从右侧滑入（300ms 动画）
- [ ] 默认显示"🧠 思路" Tab
- [ ] Reasoning 内容完整展示

### 保持隐藏（简单问题）
- [ ] 发送简单问题（如"你好"、"什么是糖尿病？"）
- [ ] AI 返回无 Reasoning 内容
- [ ] 右侧调试面板保持隐藏
- [ ] 顶部"🔍 调试"按钮可见

### 手动控制
- [ ] 点击顶部"🔍 调试"按钮
- [ ] 右侧面板滑入（即使没有 Reasoning）
- [ ] 点击面板右上角 X 按钮
- [ ] 面板滑出隐藏（300ms 动画）
- [ ] 顶部"🔍 调试"按钮再次显示

### Tab 切换
- [ ] 点击"🧠 思路" Tab，显示 Reasoning 内容
- [ ] 点击"📊 上下文" Tab，显示 ContextDebugPanel
- [ ] 点击"🛤️ 路径" Tab，显示 LangGraph 决策路径
- [ ] Tab 切换无闪烁，内容正确展示
- [ ] 激活的 Tab 显示蓝色高亮和下划线

---

## ✅ 知识文档上传

### 点击上传
- [ ] 点击"📎 上传文件"按钮
- [ ] 打开文件选择器
- [ ] 选择文件（PDF、TXT、MD、DOC、DOCX）
- [ ] 上传过程中显示"上传中..."提示（蓝色背景）
- [ ] 上传成功显示"✓ 上传成功"（绿色背景，2秒后消失）
- [ ] 上传失败显示"✗ 上传失败: [错误信息]"（红色背景，3秒后消失）

### 拖拽上传
- [ ] 拖拽文件到左侧 SessionSidebar 区域
- [ ] 拖拽悬停时，整个 Sidebar 显示蓝色边框和浅蓝背景
- [ ] 底部显示"释放以上传文件"提示
- [ ] 松开鼠标，文件开始上传
- [ ] 离开拖拽区域时，边框和背景恢复正常
- [ ] 上传状态提示同上（成功/失败）

### 查看上传列表
- [ ] 点击"📋 查看上传列表"按钮
- [ ] 弹出全屏 Modal，背景半透明黑色遮罩
- [ ] Modal 标题显示"📋 知识文档上传记录"
- [ ] 内容区域显示 KnowledgeUploadsListPanel
- [ ] 列表显示所有上传的文档（文件名、状态、大小、时间等）
- [ ] 点击右上角 X 按钮，Modal 关闭

---

## ✅ 视觉与交互

### 布局
- [ ] 左侧 Session 列表固定 260px 宽度
- [ ] 中间聊天区占据剩余空间（flex-1）
- [ ] 右侧调试面板固定 420px 宽度（展开时）
- [ ] 顶部 Header 固定 64px 高度
- [ ] 整体布局无错位、无滚动条异常

### Session 列表交互
- [ ] Session 项鼠标悬停时背景变浅灰色
- [ ] 当前 Session 显示蓝色背景和蓝色边框
- [ ] 删除按钮仅在鼠标悬停时显示
- [ ] 删除按钮悬停时背景变红色

### 拖拽反馈
- [ ] 拖拽文件进入左侧栏，边框从灰色变蓝色（border-2 border-blue-500）
- [ ] 背景从白色变浅蓝（bg-blue-50）
- [ ] 拖拽离开时恢复原样
- [ ] 视觉反馈明显且流畅

### 动画流畅度
- [ ] 调试面板滑入/滑出动画时长约 300ms
- [ ] 动画使用 ease-in-out 缓动曲线
- [ ] 无卡顿、无闪烁

### Modal 样式
- [ ] 删除确认 Modal 居中显示
- [ ] Modal 背景半透明黑色（bg-black/50）
- [ ] Modal 内容区白色背景、圆角、阴影
- [ ] "删除"按钮红色背景（bg-red-600）
- [ ] "取消"按钮灰色边框（border-gray-300）

---

## ✅ 边界情况

### 空状态
- [ ] 首次访问，左侧显示"暂无历史对话"（实际会自动创建第一个）
- [ ] 删除所有 Session 后，自动创建新 Session（或显示占位文本）
- [ ] 无 Reasoning 内容时，调试面板"思路" Tab 显示"暂无思路内容"
- [ ] 无 LangGraph 路径时，"路径" Tab 显示"暂无决策路径数据"

### 长文本
- [ ] Session 标题超过 40 字符时，自动截断并添加"..."
- [ ] 聊天区消息过长时，垂直滚动条正常工作
- [ ] 调试面板内容过长时，垂直滚动条正常工作

### 错误处理
- [ ] 上传不支持的文件格式，显示错误提示
- [ ] 上传超大文件（>10MB），显示错误提示
- [ ] 网络断开时发送消息，显示"请求失败"提示
- [ ] localStorage 存储失败（空间不足），程序不崩溃

---

## ✅ 浏览器兼容性

- [ ] Chrome/Edge（推荐）- 所有功能正常
- [ ] Firefox - 所有功能正常
- [ ] Safari - 所有功能正常

---

## ✅ 性能

- [ ] 页面初始加载时间 < 2 秒
- [ ] Session 切换响应时间 < 300ms
- [ ] 拖拽上传响应时间 < 100ms
- [ ] 调试面板滑入/滑出无卡顿
- [ ] 包含 50+ 条消息的对话，滚动流畅无卡顿

---

## 🐛 已知问题

### 待修复
- [ ] _____________________________________________
- [ ] _____________________________________________
- [ ] _____________________________________________

### 待优化
- [ ] _____________________________________________
- [ ] _____________________________________________
- [ ] _____________________________________________

---

## 📝 测试备注

_____________________________________________________
_____________________________________________________
_____________________________________________________
_____________________________________________________

---

## ✅ 最终验收结论

- [ ] **通过** - 所有功能正常，可以发布
- [ ] **有条件通过** - 部分非关键问题，可以发布但需后续修复
- [ ] **不通过** - 存在严重问题，需要修复后重新测试

---

**签字确认**: _____________  
**日期**: _____________
